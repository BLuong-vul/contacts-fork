<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>PostControllerTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">java in middleware Coverage Results</a> &gt; <a href="index.source.html" class="el_package">com.vision.testing.controller</a> &gt; <span class="el_source">PostControllerTest.java</span></div><h1>PostControllerTest.java</h1><pre class="source lang-java linenums">package com.vision.testing.controller;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.vision.middleware.controller.PostController;
import com.vision.middleware.domain.ApplicationUser;
import com.vision.middleware.domain.MediaPost;
import com.vision.middleware.domain.Post;
import com.vision.middleware.domain.relations.UserVote;
import com.vision.middleware.dto.PostDTO;
import com.vision.middleware.dto.UserDTO;
import com.vision.middleware.dto.VoteDTO;
import com.vision.middleware.repo.UserRepository;
import com.vision.middleware.service.PostService;
import com.vision.middleware.utils.JwtUtil;
import org.hamcrest.Matchers;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.junit.jupiter.MockitoExtension;
import org.springframework.data.domain.Page;
import org.springframework.data.domain.PageImpl;
import org.springframework.data.domain.PageRequest;
import org.springframework.http.MediaType;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.setup.MockMvcBuilders;

import java.text.SimpleDateFormat;
import java.time.ZoneId;
import java.time.format.DateTimeFormatter;
import java.util.Date;
import java.util.List;
import java.util.Optional;

import static org.mockito.ArgumentMatchers.any;
import static org.mockito.ArgumentMatchers.anyLong;
import static org.mockito.Mockito.verify;
import static org.mockito.Mockito.when;
import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;

@ExtendWith(MockitoExtension.class)
<span class="fc" id="L44">class PostControllerTest {</span>

    private MockMvc mockMvc;

    @Mock
    private JwtUtil jwtUtil;

    @Mock
    private PostService postService;

    @Mock
    private UserRepository userRepository;

    @InjectMocks
    private PostController postController;

    private ObjectMapper objectMapper;

    @BeforeEach
    void setUp() {
<span class="fc" id="L64">        mockMvc = MockMvcBuilders.standaloneSetup(postController).build();</span>
<span class="fc" id="L65">        objectMapper = new ObjectMapper();</span>
<span class="fc" id="L66">    }</span>

    @Test
    void testCreatePost_Success() throws Exception {
        // Arrange
<span class="fc" id="L71">        String token = &quot;validToken&quot;;</span>
<span class="fc" id="L72">        long userId = 1L;</span>
<span class="fc" id="L73">        PostDTO postDTO = createSamplePostDTO();</span>

<span class="fc" id="L75">        when(jwtUtil.checkJwtAuthAndGetUserId(token)).thenReturn(userId);</span>
<span class="fc" id="L76">        when(postService.createPost(any(PostDTO.class), anyLong())).thenReturn(createSamplePosts().get(0));</span>

        // Act &amp; Assert
<span class="fc" id="L79">        mockMvc.perform(post(&quot;/post/new&quot;)</span>
<span class="fc" id="L80">                        .header(&quot;Authorization&quot;, token)</span>
<span class="fc" id="L81">                        .contentType(MediaType.APPLICATION_JSON)</span>
<span class="fc" id="L82">                        .content(objectMapper.writeValueAsString(postDTO)))</span>
<span class="fc" id="L83">                .andExpect(status().isOk());</span>

<span class="fc" id="L85">        verify(postService).createPost(any(PostDTO.class), anyLong());</span>
<span class="fc" id="L86">    }</span>

    @Test
    void testGetAllPosts_Success() throws Exception {
        // Arrange
<span class="fc" id="L91">        int page = 0;</span>
<span class="fc" id="L92">        int size = 10;</span>
<span class="fc" id="L93">        List&lt;Post&gt; posts = createSamplePosts();</span>
<span class="fc" id="L94">        Page&lt;Post&gt; postPage = new PageImpl&lt;&gt;(posts, PageRequest.of(page, size), posts.size());</span>

<span class="fc" id="L96">        when(postService.getAllPosts(page, size)).thenReturn(postPage);</span>

        // Act &amp; Assert
<span class="fc" id="L99">        mockMvc.perform(get(&quot;/post/all&quot;)</span>
<span class="fc" id="L100">                        .param(&quot;page&quot;, String.valueOf(page))</span>
<span class="fc" id="L101">                        .param(&quot;size&quot;, String.valueOf(size)))</span>
<span class="fc" id="L102">                .andExpect(status().isOk())</span>
<span class="fc" id="L103">                .andExpect(content().contentType(MediaType.APPLICATION_JSON))</span>
<span class="fc" id="L104">                .andExpect(jsonPath(&quot;$.content&quot;).exists());</span>

<span class="fc" id="L106">        verify(postService).getAllPosts(page, size);</span>
<span class="fc" id="L107">    }</span>

    @Test
    void testGetPostsByUsername_Success() throws Exception {
        // Arrange
<span class="fc" id="L112">        String username = &quot;testuser&quot;;</span>
<span class="fc" id="L113">        int page = 0;</span>
<span class="fc" id="L114">        int size = 10;</span>
<span class="fc" id="L115">        List&lt;Post&gt; posts = createSamplePosts();</span>
<span class="fc" id="L116">        Page&lt;Post&gt; postPage = new PageImpl&lt;&gt;(posts, PageRequest.of(page, size), posts.size());</span>

<span class="fc" id="L118">        when(postService.getAllPostsByUsername(username, page, size)).thenReturn(postPage);</span>

        // Act &amp; Assert
<span class="fc" id="L121">        mockMvc.perform(get(&quot;/post/by-user&quot;)</span>
<span class="fc" id="L122">                        .param(&quot;username&quot;, username)</span>
<span class="fc" id="L123">                        .param(&quot;page&quot;, String.valueOf(page))</span>
<span class="fc" id="L124">                        .param(&quot;size&quot;, String.valueOf(size)))</span>
<span class="fc" id="L125">                .andExpect(status().isOk())</span>
<span class="fc" id="L126">                .andExpect(content().contentType(MediaType.APPLICATION_JSON))</span>
<span class="fc" id="L127">                .andExpect(jsonPath(&quot;$.content&quot;).exists());</span>

<span class="fc" id="L129">        verify(postService).getAllPostsByUsername(username, page, size);</span>
<span class="fc" id="L130">    }</span>

    @Test
    void testVoteOnPost_Success() throws Exception {
        // Arrange
<span class="fc" id="L135">        String token = &quot;validToken&quot;;</span>
<span class="fc" id="L136">        long userId = 1L;</span>
<span class="fc" id="L137">        VoteDTO voteDTO = createSampleVoteDTO();</span>

<span class="fc" id="L139">        when(jwtUtil.checkJwtAuthAndGetUserId(token)).thenReturn(userId);</span>

        // Act &amp; Assert
<span class="fc" id="L142">        mockMvc.perform(post(&quot;/post/vote&quot;)</span>
<span class="fc" id="L143">                        .header(&quot;Authorization&quot;, token)</span>
<span class="fc" id="L144">                        .contentType(MediaType.APPLICATION_JSON)</span>
<span class="fc" id="L145">                        .content(objectMapper.writeValueAsString(voteDTO)))</span>
<span class="fc" id="L146">                .andExpect(status().isOk());</span>

<span class="fc" id="L148">        verify(postService).userVoteOnPost(voteDTO.getVotableId(), userId, voteDTO.getVoteType());</span>
<span class="fc" id="L149">    }</span>

    @Test
    void testSearchPosts_Success() throws Exception {
        // Arrange
<span class="fc" id="L154">        String query = &quot;test query&quot;;</span>
<span class="fc" id="L155">        List&lt;Post&gt; posts = createSamplePosts();</span>

<span class="fc" id="L157">        when(postService.searchPosts(query)).thenReturn(posts);</span>

        // Act &amp; Assert
<span class="fc" id="L160">        mockMvc.perform(get(&quot;/post/search&quot;)</span>
<span class="fc" id="L161">                        .param(&quot;query&quot;, query))</span>
<span class="fc" id="L162">                .andExpect(status().isOk())</span>
<span class="fc" id="L163">                .andExpect(content().contentType(MediaType.APPLICATION_JSON))</span>
<span class="fc" id="L164">                .andExpect(jsonPath(&quot;$&quot;).isArray());</span>

<span class="fc" id="L166">        verify(postService).searchPosts(query);</span>
<span class="fc" id="L167">    }</span>

    @Test
    void testSearchPosts_InvalidQuery() throws Exception {
        // Act &amp; Assert
<span class="fc" id="L172">        mockMvc.perform(get(&quot;/post/search&quot;)</span>
<span class="fc" id="L173">                        .param(&quot;query&quot;, &quot;&quot;))</span>
<span class="fc" id="L174">                .andExpect(status().isBadRequest());</span>
<span class="fc" id="L175">    }</span>

    @Test
    void testSearchPostsByUser_Success() throws Exception {
        // Arrange
<span class="fc" id="L180">        String query = &quot;test query&quot;;</span>
<span class="fc" id="L181">        long userId = 1L;</span>
<span class="fc" id="L182">        ApplicationUser user = new ApplicationUser();</span>
<span class="fc" id="L183">        List&lt;Post&gt; posts = createSamplePosts();</span>

<span class="fc" id="L185">        when(userRepository.findById(userId)).thenReturn(Optional.of(user));</span>
<span class="fc" id="L186">        when(postService.searchPostsByUser(query, user)).thenReturn(posts);</span>

        // Act &amp; Assert
<span class="fc" id="L189">        mockMvc.perform(get(&quot;/post/search-by-user&quot;)</span>
<span class="fc" id="L190">                        .param(&quot;query&quot;, query)</span>
<span class="fc" id="L191">                        .param(&quot;userId&quot;, String.valueOf(userId)))</span>
<span class="fc" id="L192">                .andExpect(status().isOk())</span>
<span class="fc" id="L193">                .andExpect(content().contentType(MediaType.APPLICATION_JSON))</span>
<span class="fc" id="L194">                .andExpect(jsonPath(&quot;$&quot;).isArray());</span>

<span class="fc" id="L196">        verify(postService).searchPostsByUser(query, user);</span>
<span class="fc" id="L197">    }</span>

    @Test
    void testSearchPostsByUser_EmptyQuery() throws Exception {
        // Arrange
<span class="fc" id="L202">        String query = &quot;&quot;;</span>
<span class="fc" id="L203">        long userId = 1L;</span>
<span class="fc" id="L204">        ApplicationUser user = new ApplicationUser();</span>

<span class="fc" id="L206">        when(userRepository.findById(userId)).thenReturn(Optional.of(user));</span>

        // Act &amp; Assert
<span class="fc" id="L209">        mockMvc.perform(get(&quot;/post/search-by-user&quot;)</span>
<span class="fc" id="L210">                        .param(&quot;query&quot;, query)</span>
<span class="fc" id="L211">                        .param(&quot;userId&quot;, String.valueOf(userId)))</span>
<span class="fc" id="L212">                .andExpect(status().isBadRequest())</span>
<span class="fc" id="L213">                .andExpect(content().string(Matchers.emptyOrNullString()));</span>
<span class="fc" id="L214">    }</span>

    @Test
    void testSearchPostsByUserAndDate_Success() throws Exception {
        // Arrange
<span class="fc" id="L219">        String query = &quot;test query&quot;;</span>
<span class="fc" id="L220">        long userId = 1L;</span>
<span class="fc" id="L221">        Date startDate = new Date(System.currentTimeMillis() - 86400000); // 1 day ago</span>
<span class="fc" id="L222">        Date endDate = new Date();</span>
<span class="fc" id="L223">        ApplicationUser user = new ApplicationUser();</span>
<span class="fc" id="L224">        List&lt;Post&gt; posts = createSamplePosts();</span>

<span class="fc" id="L226">        when(userRepository.findById(userId)).thenReturn(Optional.of(user));</span>
<span class="fc" id="L227">        when(postService.searchPostsByDateRange(any(), any(), any(), any())).thenReturn(posts);</span>

        // Format dates to ISO 8601 format
<span class="fc" id="L230">        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;);</span>
<span class="fc" id="L231">        String formattedStartDate = startDate.toInstant().atZone(ZoneId.systemDefault()).format(formatter);</span>
<span class="fc" id="L232">        String formattedEndDate = endDate.toInstant().atZone(ZoneId.systemDefault()).format(formatter);</span>

        // Act &amp; Assert
<span class="fc" id="L235">        mockMvc.perform(get(&quot;/post/search-by-user-date&quot;)</span>
<span class="fc" id="L236">                        .param(&quot;query&quot;, query)</span>
<span class="fc" id="L237">                        .param(&quot;userId&quot;, String.valueOf(userId))</span>
<span class="fc" id="L238">                        .param(&quot;startDate&quot;, formattedStartDate)</span>
<span class="fc" id="L239">                        .param(&quot;endDate&quot;, formattedEndDate))</span>
<span class="fc" id="L240">                .andExpect(status().isOk())</span>
<span class="fc" id="L241">                .andExpect(content().contentType(MediaType.APPLICATION_JSON))</span>
<span class="fc" id="L242">                .andExpect(jsonPath(&quot;$&quot;).isArray());</span>

<span class="fc" id="L244">        verify(postService).searchPostsByDateRange(any(), any(), any(), any());</span>
<span class="fc" id="L245">    }</span>

    @Test
    void testSearchPostsByUserAndDate_StartDateAfterEndDate() throws Exception {
        // Arrange
<span class="fc" id="L250">        String query = &quot;test query&quot;;</span>
<span class="fc" id="L251">        long userId = 1L;</span>
<span class="fc" id="L252">        Date startDate = new Date();</span>
<span class="fc" id="L253">        Date endDate = new Date(System.currentTimeMillis() - 86400000); // 1 day ago</span>
<span class="fc" id="L254">        ApplicationUser user = new ApplicationUser();</span>
<span class="fc" id="L255">        List&lt;Post&gt; posts = createSamplePosts();</span>

<span class="fc" id="L257">        when(userRepository.findById(userId)).thenReturn(Optional.of(user));</span>

        // Format dates to ISO 8601 format
<span class="fc" id="L260">        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;);</span>
<span class="fc" id="L261">        String formattedStartDate = startDate.toInstant().atZone(ZoneId.systemDefault()).format(formatter);</span>
<span class="fc" id="L262">        String formattedEndDate = endDate.toInstant().atZone(ZoneId.systemDefault()).format(formatter);</span>

        // Act &amp; Assert
<span class="fc" id="L265">        mockMvc.perform(get(&quot;/post/search-by-user-date&quot;)</span>
<span class="fc" id="L266">                        .param(&quot;query&quot;, query)</span>
<span class="fc" id="L267">                        .param(&quot;userId&quot;, String.valueOf(userId))</span>
<span class="fc" id="L268">                        .param(&quot;startDate&quot;, formattedStartDate)</span>
<span class="fc" id="L269">                        .param(&quot;endDate&quot;, formattedEndDate))</span>
<span class="fc" id="L270">                .andExpect(status().isBadRequest())</span>
<span class="fc" id="L271">                .andExpect(content().string(Matchers.emptyOrNullString()));</span>
<span class="fc" id="L272">    }</span>

    @Test
    void testCheckUserVote_VoteExists() throws Exception {
        // Arrange
<span class="fc" id="L277">        String token = &quot;validToken&quot;;</span>
<span class="fc" id="L278">        long userId = 1L;</span>
<span class="fc" id="L279">        long votableId = 1L;</span>

<span class="fc" id="L281">        when(jwtUtil.checkJwtAuthAndGetUserId(token)).thenReturn(userId);</span>
<span class="fc" id="L282">        when(postService.getUserVote(votableId, userId)).thenReturn(Optional.of(UserVote.VoteType.LIKE));</span>

        // Act &amp; Assert
<span class="fc" id="L285">        mockMvc.perform(get(&quot;/post/get-vote&quot;)</span>
<span class="fc" id="L286">                        .header(&quot;Authorization&quot;, token)</span>
<span class="fc" id="L287">                        .param(&quot;votableId&quot;, String.valueOf(votableId)))</span>
<span class="fc" id="L288">                .andExpect(status().isOk())</span>
<span class="fc" id="L289">                .andExpect(content().string(&quot;\&quot;LIKE\&quot;&quot;));</span>

<span class="fc" id="L291">        verify(postService).getUserVote(votableId, userId);</span>
<span class="fc" id="L292">    }</span>

    @Test
    void testCheckUserVote_NoVoteExists() throws Exception {
        // Arrange
<span class="fc" id="L297">        String token = &quot;validToken&quot;;</span>
<span class="fc" id="L298">        long userId = 1L;</span>
<span class="fc" id="L299">        long votableId = 1L;</span>

<span class="fc" id="L301">        when(jwtUtil.checkJwtAuthAndGetUserId(token)).thenReturn(userId);</span>
<span class="fc" id="L302">        when(postService.getUserVote(votableId, userId)).thenReturn(Optional.empty());</span>

        // Act &amp; Assert
<span class="fc" id="L305">        mockMvc.perform(get(&quot;/post/get-vote&quot;)</span>
<span class="fc" id="L306">                        .header(&quot;Authorization&quot;, token)</span>
<span class="fc" id="L307">                        .param(&quot;votableId&quot;, String.valueOf(votableId)))</span>
<span class="fc" id="L308">                .andExpect(status().isNoContent());</span>

<span class="fc" id="L310">        verify(postService).getUserVote(votableId, userId);</span>
<span class="fc" id="L311">    }</span>

    @Test
    void testUnvoteOnPost_Success() throws Exception {
        // Arrange
<span class="fc" id="L316">        String token = &quot;validToken&quot;;</span>
<span class="fc" id="L317">        long userId = 1L;</span>
<span class="fc" id="L318">        long votableId = 1L;</span>

<span class="fc" id="L320">        when(jwtUtil.checkJwtAuthAndGetUserId(token)).thenReturn(userId);</span>

        // Act &amp; Assert
<span class="fc" id="L323">        mockMvc.perform(delete(&quot;/post/unvote&quot;)</span>
<span class="fc" id="L324">                        .header(&quot;Authorization&quot;, token)</span>
<span class="fc" id="L325">                        .param(&quot;votableId&quot;, String.valueOf(votableId)))</span>
<span class="fc" id="L326">                .andExpect(status().isNoContent());</span>

<span class="fc" id="L328">        verify(postService).removeUserVote(votableId, userId);</span>
<span class="fc" id="L329">    }</span>

    @Test
    void testMediaPostDTOCast_IsWorking() throws Exception {
        // Arrange
<span class="fc" id="L334">        int page = 0;</span>
<span class="fc" id="L335">        int size = 10;</span>
<span class="fc" id="L336">        List&lt;Post&gt; posts = createSampleImagePosts();</span>
<span class="fc" id="L337">        Page&lt;Post&gt; postPage = new PageImpl&lt;&gt;(posts, PageRequest.of(page, size), posts.size());</span>

<span class="fc" id="L339">        when(postService.getAllPosts(page, size)).thenReturn(postPage);</span>

        // Act &amp; Assert
<span class="fc" id="L342">        mockMvc.perform(get(&quot;/post/all&quot;)</span>
<span class="fc" id="L343">                        .param(&quot;page&quot;, String.valueOf(page))</span>
<span class="fc" id="L344">                        .param(&quot;size&quot;, String.valueOf(size)))</span>
<span class="fc" id="L345">                .andExpect(status().isOk())</span>
<span class="fc" id="L346">                .andExpect(content().contentType(MediaType.APPLICATION_JSON))</span>
<span class="fc" id="L347">                .andExpect(jsonPath(&quot;$.content&quot;).exists())</span>
<span class="fc" id="L348">                .andExpect(jsonPath(&quot;$.content.[0].mediaFileName&quot;).exists());</span>

<span class="fc" id="L350">        verify(postService).getAllPosts(page, size);</span>
<span class="fc" id="L351">    }</span>

    @Test
    void testGetPostById_Success() throws Exception {
        // Arrange
<span class="fc" id="L356">        long postId = 1L;</span>
<span class="fc" id="L357">        Post post = createSamplePosts().get(0);</span>

<span class="fc" id="L359">        when(postService.loadPostById(postId)).thenReturn(post);</span>

        // Act &amp; Assert
<span class="fc" id="L362">        mockMvc.perform(get(&quot;/post/by-id&quot;)</span>
<span class="fc" id="L363">                        .param(&quot;id&quot;, String.valueOf(postId)))</span>
<span class="fc" id="L364">                .andExpect(status().isOk())</span>
<span class="fc" id="L365">                .andExpect(content().contentType(MediaType.APPLICATION_JSON))</span>
<span class="fc" id="L366">                .andExpect(jsonPath(&quot;$.postId&quot;).value(post.getId()))</span>
<span class="fc" id="L367">                .andExpect(jsonPath(&quot;$.title&quot;).value(post.getTitle()))</span>
<span class="fc" id="L368">                .andExpect(jsonPath(&quot;$.text&quot;).value(post.getText()));</span>

<span class="fc" id="L370">        verify(postService).loadPostById(postId);</span>
<span class="fc" id="L371">    }</span>

    // Helper methods to create sample objects for testing
    private PostDTO createSamplePostDTO() {
<span class="fc" id="L375">        UserDTO user = UserDTO.builder()</span>
<span class="fc" id="L376">                .userId(1L)</span>
<span class="fc" id="L377">                .username(&quot;testuser&quot;)</span>
<span class="fc" id="L378">                .fullName(&quot;hello world&quot;)</span>
<span class="fc" id="L379">                .build();</span>

<span class="fc" id="L381">        return PostDTO.builder()</span>
<span class="fc" id="L382">                .title(&quot;Test Post&quot;)</span>
<span class="fc" id="L383">                .text(&quot;Test Content&quot;)</span>
<span class="fc" id="L384">                .postedBy(user)</span>
<span class="fc" id="L385">                .build();</span>
    }

    private List&lt;Post&gt; createSamplePosts() {
<span class="fc" id="L389">        ApplicationUser user = ApplicationUser.builder()</span>
<span class="fc" id="L390">                .id(1L)</span>
<span class="fc" id="L391">                .username(&quot;testuser&quot;)</span>
<span class="fc" id="L392">                .password(&quot;testpassword&quot;)</span>
<span class="fc" id="L393">                .fullName(&quot;hello world&quot;)</span>
<span class="fc" id="L394">                .email(&quot;a@b.com&quot;)</span>
<span class="fc" id="L395">                .phoneNumber(&quot;1234567890&quot;)</span>
<span class="fc" id="L396">                .build();</span>

<span class="fc" id="L398">        Post post = Post.builder()</span>
<span class="fc" id="L399">                .id(1L)</span>
<span class="fc" id="L400">                .title(&quot;Test Post&quot;)</span>
<span class="fc" id="L401">                .text(&quot;Test Content&quot;)</span>
<span class="fc" id="L402">                .postedBy(user)</span>
<span class="fc" id="L403">                .build();</span>

<span class="fc" id="L405">        return List.of(post);</span>
    }

    private List&lt;Post&gt; createSampleImagePosts() {
<span class="fc" id="L409">        ApplicationUser user = ApplicationUser.builder()</span>
<span class="fc" id="L410">                .id(1L)</span>
<span class="fc" id="L411">                .username(&quot;testuser&quot;)</span>
<span class="fc" id="L412">                .password(&quot;testpassword&quot;)</span>
<span class="fc" id="L413">                .fullName(&quot;hello world&quot;)</span>
<span class="fc" id="L414">                .email(&quot;a@b.com&quot;)</span>
<span class="fc" id="L415">                .phoneNumber(&quot;1234567890&quot;)</span>
<span class="fc" id="L416">                .build();</span>

<span class="fc" id="L418">        Post post = MediaPost.builder()</span>
<span class="fc" id="L419">                .id(1L)</span>
<span class="fc" id="L420">                .title(&quot;Test Post&quot;)</span>
<span class="fc" id="L421">                .text(&quot;Test Content&quot;)</span>
<span class="fc" id="L422">                .postedBy(user)</span>
<span class="fc" id="L423">                .mediaFileName(&quot;test media&quot;)</span>
<span class="fc" id="L424">                .build();</span>

<span class="fc" id="L426">        return List.of(post);</span>
    }

    private VoteDTO createSampleVoteDTO() {
<span class="fc" id="L430">        return VoteDTO.builder()</span>
<span class="fc" id="L431">                .votableId(1L)</span>
<span class="fc" id="L432">                .voteType(UserVote.VoteType.LIKE)</span>
<span class="fc" id="L433">                .build();</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>